name: V54 Shield

# 設定執行觸發條件
on:
  schedule:
    # 台灣時間晚上 20:00 = UTC 12:00
    - cron: '0 12 * * *'
  # 允許您在 GitHub 網頁介面手動點擊 "Run workflow" 立即執行
  workflow_dispatch:

jobs:
  run-bot:
    # 使用最新的 Ubuntu 環境
    runs-on: ubuntu-latest
    
    steps:
      # 1. 檢出您的儲存庫代碼
      - name: Checkout Repository
        uses: actions/checkout@v3

      # 2. 設定 Python 環境
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      # 3. 安裝所有必要的 Python 套件 (特別包含 scipy)
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install yfinance pandas numpy requests scipy

      # 4. 執行 V54 策略腳本
      - name: Run V54 Strategy
        env:
          # 從您的 GitHub Secrets 讀取 LINE API 金鑰
          LINE_CHANNEL_ACCESS_TOKEN: ${{ secrets.LINE_CHANNEL_ACCESS_TOKEN }}
          LINE_USER_ID: ${{ secrets.LINE_USER_ID }}
        # ⚠️ 關鍵：因為檔名包含空格與括號，執行指令必須使用雙引號包裹
        run: python "Gemini V54 Shield.py"
